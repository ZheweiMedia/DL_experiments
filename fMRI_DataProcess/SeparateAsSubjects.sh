#!/bin/bash

cd /home/medialab/data/ADNI/ADNI
# list the samples we want to process
IIDarray=( 238623 303069 240811 304790 371994 \
243902 322442 223896 286519 \
361612 233437 287493 361431 254581 \
273218 290923 335999 391150 257271 \
274579 297353 340048 395105 \
259654 274825 299159 346113 397604 \
259806 260580 277135 301757 346801 \
398533 395980 249406 249407 265125 \
265132 289854 289846 336212 336216 \
389367 268914 268917 286464 286461 \
311258 311257 349326 349320 405706 \
279472 279468 298510 298515 319632 \
319634 362889 281887 281881 303081 \
303083 326301 326298 361294 \
310441 337404 363620 283913 319211 \
350450 373523 238542 238540 253525 \
424849 312870 336708 365243 \
297689 313953 377213 368889 296769 \
314141 352724 375151 296863 \
369618 340743 368950 300088 314505 \
343935 368923 308182 262078 296612 \
320519 268925 297183 321439 348187 \
401398 266634 296891 315798 348166 \
399633 272223 301492 327813 \
354839 403913 273503 296638 316619 \
353130 409002 269279 288745 306127 \
347150 401663 315850 338813 355339 \
383452 229146 246871 261918 300743 \
370595 234917 251325 270397 305150 \
371750 255986 274090 292605 337977 \
391167 280365 302555 321203 282646 \
308418   )

XMLS=`find ./ -name "*Resting_State_fMRI*.xml"`

for X in $XMLS
do
    iid=`xmllint --xpath '//project/subject/study/series/imagingProtocol/imageUID/text()' $X`
    subj=`xmllint --xpath '//project/subject/subjectIdentifier/text()' $X`
    case "${IIDarray[@]}" in  *$iid*)
        echo $iid
        cat /home/medialab/Zhewei/data/NC_Results/NC_Result${iid}.txt >> /home/medialab/Zhewei/data/NC_Results/NC_Subj${subj}.txt
    esac
done
