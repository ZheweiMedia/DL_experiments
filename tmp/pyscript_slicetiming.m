fprintf(1,'Executing %s at %s:\n',mfilename(),datestr(now));
ver,
try,
        %% Generated by nipype.interfaces.spm
        if isempty(which('spm')),
             throw(MException('SPMCheck:NotFound', 'SPM not in matlab path'));
        end
        [name, version] = spm('ver');
        fprintf('SPM version: %s Release: %s\n',name, version);
        fprintf('SPM path: %s\n', which('spm'));
        spm('Defaults','fMRI');

        if strcmp(name, 'SPM8') || strcmp(name(1:5), 'SPM12'),
           spm_jobman('initcfg');
           spm_get_defaults('cmdline', 1);
        end

        jobs{1}.spm.temporal.st.so(1) = 0;
jobs{1}.spm.temporal.st.so(2) = 1;
jobs{1}.spm.temporal.st.so(3) = 2;
jobs{1}.spm.temporal.st.so(4) = 3;
jobs{1}.spm.temporal.st.so(5) = 4;
jobs{1}.spm.temporal.st.so(6) = 5;
jobs{1}.spm.temporal.st.so(7) = 6;
jobs{1}.spm.temporal.st.so(8) = 7;
jobs{1}.spm.temporal.st.so(9) = 8;
jobs{1}.spm.temporal.st.so(10) = 9;
jobs{1}.spm.temporal.st.so(11) = 10;
jobs{1}.spm.temporal.st.so(12) = 11;
jobs{1}.spm.temporal.st.so(13) = 12;
jobs{1}.spm.temporal.st.so(14) = 13;
jobs{1}.spm.temporal.st.so(15) = 14;
jobs{1}.spm.temporal.st.so(16) = 15;
jobs{1}.spm.temporal.st.so(17) = 16;
jobs{1}.spm.temporal.st.so(18) = 17;
jobs{1}.spm.temporal.st.so(19) = 18;
jobs{1}.spm.temporal.st.so(20) = 19;
jobs{1}.spm.temporal.st.so(21) = 20;
jobs{1}.spm.temporal.st.so(22) = 21;
jobs{1}.spm.temporal.st.so(23) = 22;
jobs{1}.spm.temporal.st.so(24) = 23;
jobs{1}.spm.temporal.st.so(25) = 24;
jobs{1}.spm.temporal.st.so(26) = 25;
jobs{1}.spm.temporal.st.so(27) = 26;
jobs{1}.spm.temporal.st.so(28) = 27;
jobs{1}.spm.temporal.st.so(29) = 28;
jobs{1}.spm.temporal.st.so(30) = 29;
jobs{1}.spm.temporal.st.so(31) = 30;
jobs{1}.spm.temporal.st.so(32) = 31;
jobs{1}.spm.temporal.st.so(33) = 32;
jobs{1}.spm.temporal.st.so(34) = 33;
jobs{1}.spm.temporal.st.so(35) = 34;
jobs{1}.spm.temporal.st.so(36) = 35;
jobs{1}.spm.temporal.st.so(37) = 36;
jobs{1}.spm.temporal.st.so(38) = 37;
jobs{1}.spm.temporal.st.so(39) = 38;
jobs{1}.spm.temporal.st.so(40) = 39;
jobs{1}.spm.temporal.st.so(41) = 40;
jobs{1}.spm.temporal.st.so(42) = 41;
jobs{1}.spm.temporal.st.so(43) = 42;
jobs{1}.spm.temporal.st.so(44) = 43;
jobs{1}.spm.temporal.st.so(45) = 44;
jobs{1}.spm.temporal.st.so(46) = 45;
jobs{1}.spm.temporal.st.so(47) = 46;
jobs{1}.spm.temporal.st.so(48) = 47;
jobs{1}.spm.temporal.st.scans = {...
{...
'20120201_084246RestingStatefMRIs601a1006_010.nii,1';...
'20120201_084246RestingStatefMRIs601a1006_015.nii,1';...
};
};
jobs{1}.spm.temporal.st.nslices = 48;
jobs{1}.spm.temporal.st.refslice = 24;
jobs{1}.spm.temporal.st.prefix = 'b';
jobs{1}.spm.temporal.st.ta = 2.9375;
jobs{1}.spm.temporal.st.tr = 3.0;

        spm_jobman('run', jobs);

        
,catch ME,
fprintf(2,'MATLAB code threw an exception:\n');
fprintf(2,'%s\n',ME.message);
if length(ME.stack) ~= 0, fprintf(2,'File:%s\nName:%s\nLine:%d\n',ME.stack.file,ME.stack.name,ME.stack.line);, end;
end;